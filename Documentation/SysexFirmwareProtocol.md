# Sysex Firmware Update Protocol

Some half-baked information on the firmware update process over Sysex (.syx)


| DATA NAME                    | SIZE    | DEFAULT VALUE               |                                      | NOTES                                                                                                                               |                                                                                                                                     |                                  |
| ---------------------------- | ------- | --------------------------- | ------------------------------------ | ----------------------------------------------------------------------------------------------------------------------------------- | ----------------------------------------------------------------------------------------------------------------------------------- | -------------------------------- |
| SYSEX START                  | 1 Byte  | 0xF0                        |                                      | All sysex messages start with this byte                                                                                             |                                                                                                                                     |                                  |
| MANUFACTURER CODE (NOVATION) | 4 Bytes | 0x00202900                  |                                      | Every message requires this manufacturer section                                                                                    |                                                                                                                                     |                                  |
| COMMAND/ACTION               | 1 Byte  | SEE TABLE BELOW             |                                      | Payload format requirements vary based on command/action                                                                            |                                                                                                                                     |                                  |
| PAYLOAD                      | N Bytes | SEE TABLE BELOW             |                                      | ^^^^^^^^^^^^^^^^^^                                                                                                                  |                                                                                                                                     |                                  |
| ???????                      | ???     | ????                        |                                      | Some sorta fuckin crc?                                                                                                              |                                                                                                                                     |                                  |
| SYSEX END                    | 1 Byte  | 0xF7                        |                                      | All sysex messages end with this byte                                                                                               |                                                                                                                                     |                                  |
|                              |         |                             |                                      |                                                                                                                                     |                                                                                                                                     |                                  |
|                              |         |                             |                                      |                                                                                                                                     |                                                                                                                                     |                                  |
|                              |         |                             |                                      |                                                                                                                                     |                                                                                                                                     |                                  |
| COMMAND NAME                 | VALUE   | PAYLOAD                     | TOTAL PACKET SIZE (with above bytes) | Notes/Requirements                                                                                                                  | EXAMPLE                                                                                                                             |                                  |
| get_device                   | 0x71    | 0x0XXYY                     | 15 Bytes                             | [Format: 0xXXYY ] X: PRODUCT_FAMILY Y: PRODUCT_ID (EX. Circuit Tracks 0x0164)                                                       | F0 00 20 29 00 71 01 64 00 00 00 04 09 02 F7                                                                                        | the fuck are these orange bytes? |
| init_update                  | 0x7C    | ???                         | 30 Bytes                             | Not sure what the payload reqs are for this? Those orange bytes are present tho. Maybe this puts the device in DFU/Bootloader mode? | F0 00 20 29 00 7C 00 00 00 00 04 09 02 00 00 00 04 0B 0B 02 08 0C 00 03 01 0A 0A 01 0D F7                                           | the fuck are these orange bytes? |
| write_block                  | 0x72    | [...] to 38 bytes in length | 44 Bytes                             | Writes to flash in 38byte chunks? Maybe a CRC in here?                                                                              | F0 00 20 29 00 72 00 00 00 00 00 00 00 00 00 00 00 00 00 02 7B 57 00 42 17 38 38 14 10 00 00 00 00 06 0E 5C 02 08 5E 61 60 50 40 F7 |                                  |
| finish_write                 | 0x73    | ?                           | 44 Bytes                             | Finalizes update, no idea what the payload is                                                                                       | F0 00 20 29 00 73 00 00 00 52 04 06 5A 05 04 23 70 70 28 22 23 07 02 42 12 38 38 14 11 15 43 41 21 0A 4C 1C 0A 08 00 00 00 00 00 F7 |                                  |
| update_footer                | 0x76    | ?                           | 44 Bytes                             | Not found in cicuit firmware so far                                                                                                 | ???                                                                                                                                 |                                  |
|                              |         |                             |                                      |                                                                                                                                     |                                                                                                                                     |                                  |